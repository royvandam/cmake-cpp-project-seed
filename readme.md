# CMake C++ library and application project example

Supports:

- Unit testing using Google Test framework
- GCov unit test coverage analysis
- Code formatting using clang-format

## 1. Building

```
mkdir build
cd build
cmake CMAKE_BUILD_TYPE={Release, Debug} ..
make -j
```

## 2. Using the library 'example' in other cmake projects

### 2.1 Add project to an existing repository as submodule

```
$ git submodule init
$ git submodule add https://github.com/royvandam/cmake-cpp-project-seed.git
```

#### CMakeLists.txt

```
set(TARGET my_application)
add_executable(${TARGET} ${HEADERS} ${SOURCES})

# Include the library
add_subdirectory(path/to/libexample)
target_include_directories(${TARGET} PRIVATE
    $<TARGET_PROPERTY:example,INTERFACE_INCLUDE_DIRECTORIES>)
target_link_libraries(${TARGET} example)
```

## 3. Unit testing

Unit tests are build by default for the native target architecture for the host machine. Test report can be generated by running the following statement from the build folder:

```
ctest --no-compress-output -T test
```

## 4. Code Coverage

Code coverage on the unittests can be activated by using the *ENABLE_COVERAGE=ON* option when running cmake:

```
$ cmake -DCMAKE_BUILD_TYPE=Debug -DENABLE_COVERAGE=ON ..
```

The following make command can be used after coverage is enabled:

```
$ make example-test-coverage
```

The unittests will be build and executed with this command. After a successful test a code coverage report in HTML will be generated in *build/example-test-coverage/*.

Open the index.html for the report of the current test code coverage:

```
$ sensible-browser ./example-test-coverage/index.html
```

## 5. Code formatting

```
make format
```
